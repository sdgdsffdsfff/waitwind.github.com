<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<script src="tools/tssJS.js"></script>
 
<style type="text/css">

  #movieBox * { margin:0; padding:0; list-style:none; }
  #movieBox { width:1000px; height:600px; margin:20px auto; background:#333; position:relative; overflow:hidden;}
  #movieBox .picUl { width:9999px; position:absolute; left:0; top:0;}
  #movieBox .picUl li { float:left; position:relative; }
  #movieBox .picUl li img { width: 1000px; height: 600px; }
  #movieBox .picUl li  h2 {
    background: rgba(0, 0, 0, 0.5);
    position: absolute; right: 0; top: 0; 
    width: 300px; padding: 8px;
    font-size: 16px; color: #fff; text-decoration: none;
  }

  #movieBox .btn { cursor:pointer; width:45px; height:45px; position:absolute; top:190px; z-index:10;}
  #movieBox .pre { background:url(images/l.png) no-repeat; left:10px; }
  #movieBox .next{ background:url(images/r.png) no-repeat; right:10px; }
  #movieBox .switchTag { width:100%; height:10px; position:absolute; bottom:15px; z-index:10 }
  #movieBox .switchTag ul { width:120px; margin:0 auto; }
  #movieBox .switchTag ul li { width:10px; height:10px; margin:0 5px; border-radius:10px; background:grey; float:left; }
  #movieBox .switchTag ul li.active { background:red; }

</style>

<script type="text/javascript">

window.onload = initMovie;

function initMovie() {
    var movieBox = $('#movieBox')[0];
    var picUl  = $('.picUl', movieBox)[0];
    var picLis = $('li', picUl);
    var switchTag = $('.switchTag li');
    
    function tab() {
      switchTag.each(function(i, li) {
        $(li).removeClass("active");
      });
      $(switchTag[now]).addClass("active");

      startMove(picUl, -(now * picLis[0].offsetWidth));
    }

    function startMove(obj, picWidth) {
      clearInterval(obj.timer)
      obj.timer = setInterval(function(){
         var currentLeft = parseInt( $(obj).css("left").replace("px", "") );
         if(currentLeft == picWidth) {
           clearInterval(obj.timer)
         }
         else { 
            var speed = (picWidth - currentLeft) / 4;
            speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);
            $(obj).css("left", (currentLeft + speed) + 'px');
         }
      }, 30)
    }

    var now = 0;
    switchTag.each(function(i, li) {
      li.index = i;
      $(li).click(function() {
        now = this.index;
        tab();
      });
    });

    $('.pre', movieBox).click( function() {
      if(--now == -1) now = picLis.length;
      tab();
    });

    var oNext = $('.next', movieBox)[0];
    $(oNext).click( function() {
      if(++now == picLis.length)  now = 0;
      tab();
    } );

    var timer = setInterval(oNext.onclick, 3000) 
    movieBox.onmouseover = function() {
      clearInterval(timer)
    }
    movieBox.onmouseout = function() {
      timer = setInterval(oNext.onclick, 3000) 
    }
  }

</script>

</head>
<body>
 
  <div id="movieBox">
    <div class="btn pre"></div>
    <div class="btn next"></div>
    <div class="switchTag">
      <ul>
        <li class="active"></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
      </ul>
    </div>
    <ul class="picUl">
       <li><a href="#" target="_blank"><h2>基本图表展示1</h2><img src="images/tsspic/1.png"</a></li>
       <li><a href="#" target="_blank"><h2>基本图表展示2</h2><img src="images/tsspic/2.png"</a></li>
       <li><a href="#" target="_blank"><h2>基本图表展示3</h2><img src="images/tsspic/3.png"</a></li>
       <li><a href="#" target="_blank"><h2>基本图表展示4</h2><img src="images/tsspic/4.png"</a></li>
       <li><a href="#" target="_blank"><h2>基本图表展示5</h2><img src="images/tsspic/5.png"</a></li>
    </ul>
  </div>

</body>
</html>